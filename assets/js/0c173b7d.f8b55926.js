"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5646],{5217:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"library/configuration","title":"Configuration & Connexion","description":"Cette page explique comment configurer et \xe9tablir une connexion avec GO ORM, en suivant plusieurs niveaux de complexit\xe9.","source":"@site/docs/library/configuration.md","sourceDirName":"library","slug":"/library/configuration","permalink":"/go-orm-doc/docs/library/configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docs","previous":{"title":"Fonctionnalit\xe9s de l\'ORM","permalink":"/go-orm-doc/docs/library/features"},"next":{"title":"Mod\xe8les","permalink":"/go-orm-doc/docs/library/models"}}');var r=i(4848),t=i(8453);const s={sidebar_position:3},l="Configuration & Connexion",a={},c=[{value:"1. Installation du package",id:"1-installation-du-package",level:2},{value:"2. Utilisation du <strong>ConfigBuilder</strong>",id:"2-utilisation-du-configbuilder",level:2},{value:"3. Connexion via <strong>SimpleORM</strong>",id:"3-connexion-via-simpleorm",level:2},{value:"4. Connexion rapide (Quick Setup)",id:"4-connexion-rapide-quick-setup",level:2},{value:"5. Chargement des variables d\u2019environnement",id:"5-chargement-des-variables-denvironnement",level:2},{value:"6. Activation du <strong>pool de connexions</strong>",id:"6-activation-du-pool-de-connexions",level:2},{value:"7. Journalisation et Cache global",id:"7-journalisation-et-cache-global",level:2},{value:"8. S\xe9lection dynamique du dialecte",id:"8-s\xe9lection-dynamique-du-dialecte",level:2},{value:"9. Gestion des erreurs de connexion",id:"9-gestion-des-erreurs-de-connexion",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"configuration--connexion",children:"Configuration & Connexion"})}),"\n",(0,r.jsx)(n.p,{children:"Cette page explique comment configurer et \xe9tablir une connexion avec GO ORM, en suivant plusieurs niveaux de complexit\xe9."}),"\n",(0,r.jsx)(n.h2,{id:"1-installation-du-package",children:"1. Installation du package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"go get github.com/ESGI-M2/GO@v1.2.3\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Utilisez toujours la derni\xe8re version tagu\xe9e pour profiter des correctifs."}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"2-utilisation-du-configbuilder",children:["2. Utilisation du ",(0,r.jsx)(n.strong,{children:"ConfigBuilder"})]}),"\n",(0,r.jsxs)(n.p,{children:["Le ",(0,r.jsx)(n.code,{children:"ConfigBuilder"})," est une API fluide permettant de cr\xe9er une configuration compl\xe8te :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'cfg := builder.NewConfigBuilder().\n    WithDialect(factory.MySQL).        // S\xe9lection du dialecte\n    WithHost("localhost").\n    WithPort(3306).\n    WithDatabase("myapp").\n    WithCredentials("user", "password").\n    WithCharset("utf8mb4").\n    WithAutoCreateDatabase().          // Cr\xe9e la BDD si absente\n    Build()\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"3-connexion-via-simpleorm",children:["3. Connexion via ",(0,r.jsx)(n.strong,{children:"SimpleORM"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'orm := builder.NewSimpleORM().\n    WithConfig(cfg).\n    RegisterModels(&User{})\n\nif err := orm.Connect(); err != nil {\n    log.Fatalf("connexion : %v", err)\n}\n\ndefer orm.Close()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"4-connexion-rapide-quick-setup",children:"4. Connexion rapide (Quick Setup)"}),"\n",(0,r.jsx)(n.p,{children:"Pour des tests rapides :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'orm := builder.NewSimpleORM().\n    WithMySQL().\n    WithQuickConfig("localhost", "myapp", "user", "password").\n    RegisterModels(&User{})\n'})}),"\n",(0,r.jsx)(n.h2,{id:"5-chargement-des-variables-denvironnement",children:"5. Chargement des variables d\u2019environnement"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'cfg := builder.NewConfigBuilder().\n    WithDialect(factory.PostgreSQL).\n    WithEnvFile(".env").\n    FromEnv()\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Fichier ",(0,r.jsx)(n.code,{children:".env"})," :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"POSTGRES_HOST=localhost\nPOSTGRES_PORT=5432\nPOSTGRES_DB=myapp\nPOSTGRES_USER=user\nPOSTGRES_PASSWORD=secret\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"6-activation-du-pool-de-connexions",children:["6. Activation du ",(0,r.jsx)(n.strong,{children:"pool de connexions"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"cfg := builder.NewConfigBuilder().\n    WithDialect(factory.MySQL).\n    WithMaxOpenConns(20).\n    WithMaxIdleConns(10).\n    Build()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"7-journalisation-et-cache-global",children:"7. Journalisation et Cache global"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"orm := builder.NewAdvancedORM().\n    WithConfig(cfg).\n    EnableQueryLog().\n    WithCache()            // cache m\xe9moire simple\n"})}),"\n",(0,r.jsx)(n.h2,{id:"8-s\xe9lection-dynamique-du-dialecte",children:"8. S\xe9lection dynamique du dialecte"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"var dialectType factory.DialectType\n// \u2026 r\xe9cup\xe9r\xe9 depuis un param\xe8tre CLI\n\norm := builder.NewSimpleORM().WithDialect(dialectType)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"9-gestion-des-erreurs-de-connexion",children:"9. Gestion des erreurs de connexion"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"if err := orm.Connect(); err != nil {\n    if errors.Is(err, connection.ErrInvalidCredentials) {\n        // \u2026\n    }\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["La configuration \xe9tant pr\xeate, vous pouvez passer \xe0 la d\xe9finition des ",(0,r.jsx)(n.strong,{children:"Mod\xe8les"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var o=i(6540);const r={},t=o.createContext(r);function s(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);