"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1708],{8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var i=s(6540);const t={},l=i.createContext(t);function a(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(l.Provider,{value:n},e.children)}},9795:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"technical/metadata","title":"Metadata - Impl\xe9mentation technique","description":"Cette page d\xe9taille l\'impl\xe9mentation du syst\xe8me de m\xe9tadonn\xe9es qui analyse et met en cache les informations sur les structures.","source":"@site/docs/technical/metadata.md","sourceDirName":"technical","slug":"/technical/metadata","permalink":"/docs/intro/docs/technical/metadata","draft":false,"unlisted":false,"editUrl":"https://github.com/ESGI-M2/GO/tree/main/docs/docs/technical/metadata.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"M\xe9tadonn\xe9es & R\xe9flexion"},"sidebar":"docs","previous":{"title":"Gestion des dialectes","permalink":"/docs/intro/docs/technical/dialectes"},"next":{"title":"Repository interne","permalink":"/docs/intro/docs/technical/repository"}}');var t=s(4848),l=s(8453);const a={sidebar_position:3,sidebar_label:"M\xe9tadonn\xe9es & R\xe9flexion"},r="Metadata - Impl\xe9mentation technique",d={},c=[{value:"Fonctionnalit\xe9s Go utilis\xe9es",id:"fonctionnalit\xe9s-go-utilis\xe9es",level:2},{value:"Packages standards",id:"packages-standards",level:3},{value:"Concepts Go avanc\xe9s",id:"concepts-go-avanc\xe9s",level:3},{value:"Patterns Go idiomatiques",id:"patterns-go-idiomatiques",level:3},{value:"Structure interne",id:"structure-interne",level:2},{value:"Extraction des m\xe9tadonn\xe9es",id:"extraction-des-m\xe9tadonn\xe9es",level:2},{value:"Tags support\xe9s",id:"tags-support\xe9s",level:2},{value:"Cache des m\xe9tadonn\xe9es",id:"cache-des-m\xe9tadonn\xe9es",level:2},{value:"Relations",id:"relations",level:2},{value:"Validation",id:"validation",level:2},{value:"Performance",id:"performance",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"metadata---impl\xe9mentation-technique",children:"Metadata - Impl\xe9mentation technique"})}),"\n",(0,t.jsx)(n.p,{children:"Cette page d\xe9taille l'impl\xe9mentation du syst\xe8me de m\xe9tadonn\xe9es qui analyse et met en cache les informations sur les structures."}),"\n",(0,t.jsx)(n.h2,{id:"fonctionnalit\xe9s-go-utilis\xe9es",children:"Fonctionnalit\xe9s Go utilis\xe9es"}),"\n",(0,t.jsx)(n.h3,{id:"packages-standards",children:"Packages standards"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"reflect"})," : Analyse compl\xe8te des structures"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sync"})," : Cache thread-safe avec ",(0,t.jsx)(n.code,{children:"sync.Map"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"strings"})," : Manipulation des noms de tables/colonnes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"encoding/json"})," : Support des tags JSON"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"regexp"})," : Validation des noms d'identifiants"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"concepts-go-avanc\xe9s",children:"Concepts Go avanc\xe9s"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Reflection"})," : Introspection profonde des types"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Struct tags"})," : Parsing des m\xe9tadonn\xe9es de mapping"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type switches"})," : Analyse des types de champs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Interface satisfaction"})," : D\xe9tection des hooks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type embedding"})," : H\xe9ritage des m\xe9tadonn\xe9es"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"patterns-go-idiomatiques",children:"Patterns Go idiomatiques"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Singleton"})," : Cache global des m\xe9tadonn\xe9es"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lazy loading"})," : Analyse \xe0 la demande"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Immutability"})," : M\xe9tadonn\xe9es immuables apr\xe8s cr\xe9ation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type registry"})," : Enregistrement des types personnalis\xe9s"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error handling"})," : Validation stricte des structures"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"structure-interne",children:"Structure interne"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"type Metadata struct {\n    ModelType    reflect.Type\n    TableName    string\n    PrimaryKey   string\n    Columns      []Column\n    Relationships []Relationship\n    Hooks        []Hook\n    cache        *sync.Map\n}\n\ntype Column struct {\n    Name         string\n    Field        string\n    Type         reflect.Type\n    IsNullable   bool\n    DefaultValue interface{}\n    Tags         map[string]string\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"extraction-des-m\xe9tadonn\xe9es",children:"Extraction des m\xe9tadonn\xe9es"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Analyse du type via reflection"}),"\n",(0,t.jsx)(n.li,{children:"Lecture des tags de structure"}),"\n",(0,t.jsx)(n.li,{children:"D\xe9tection des relations"}),"\n",(0,t.jsx)(n.li,{children:"Validation des contraintes"}),"\n",(0,t.jsx)(n.li,{children:"Mise en cache du r\xe9sultat"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"tags-support\xe9s",children:"Tags support\xe9s"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'orm:"column:name"'})," : Nom de colonne"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'orm:"primary_key"'})," : Cl\xe9 primaire"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'orm:"type:varchar(255)"'})," : Type SQL"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'orm:"not null"'})," : Contrainte"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'orm:"default:value"'})," : Valeur par d\xe9faut"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"cache-des-m\xe9tadonn\xe9es",children:"Cache des m\xe9tadonn\xe9es"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Utilisation de ",(0,t.jsx)(n.code,{children:"sync.Map"})]}),"\n",(0,t.jsxs)(n.li,{children:["Cl\xe9 = ",(0,t.jsx)(n.code,{children:"reflect.Type"})]}),"\n",(0,t.jsxs)(n.li,{children:["Valeur = ",(0,t.jsx)(n.code,{children:"*Metadata"})]}),"\n",(0,t.jsx)(n.li,{children:"Thread-safe par design"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"relations",children:"Relations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"One-to-One : Champ unique"}),"\n",(0,t.jsx)(n.li,{children:"One-to-Many : Slice"}),"\n",(0,t.jsx)(n.li,{children:"Many-to-Many : Table de jointure"}),"\n",(0,t.jsx)(n.li,{children:"Belongs-To : Cl\xe9 \xe9trang\xe8re"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"validation",children:"Validation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Noms de tables/colonnes valides"}),"\n",(0,t.jsx)(n.li,{children:"Types support\xe9s par les dialectes"}),"\n",(0,t.jsx)(n.li,{children:"Relations coh\xe9rentes"}),"\n",(0,t.jsx)(n.li,{children:"Tags syntaxiquement corrects"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Cache des m\xe9tadonn\xe9es"}),"\n",(0,t.jsx)(n.li,{children:"R\xe9utilisation des types reflect"}),"\n",(0,t.jsx)(n.li,{children:"Analyse unique par type"}),"\n",(0,t.jsx)(n.li,{children:"Validation \xe0 la compilation si possible"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Les m\xe9tadonn\xe9es sont le c\u0153ur de l'ORM, permettant le mapping objet-relationnel."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);