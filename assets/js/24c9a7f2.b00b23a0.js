"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[973],{7548:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"library/api-reference","title":"R\xe9f\xe9rence API","description":"Cette documentation est con\xe7ue pour les d\xe9veloppeurs utilisant l\'ORM. Elle fournit des explications pratiques, des exemples concrets et des bonnes pratiques pour chaque fonctionnalit\xe9.","source":"@site/docs/library/api-reference.md","sourceDirName":"library","slug":"/library/api-reference","permalink":"/go-orm-doc/docs/library/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/ESGI-M2/GO/tree/main/docs/docs/library/api-reference.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"R\xe9f\xe9rence API","permalink":"/go-orm-doc/docs/api-reference"}}');var i=r(4848),t=r(8453);const l={},a="R\xe9f\xe9rence API",d={},o=[{value:"Sommaire",id:"sommaire",level:2},{value:"Op\xe9rations de Base",id:"operations-de-base",level:2},{value:"Gestion des Mod\xe8les",id:"gestion-des-modeles",level:3},{value:"Structure d&#39;un Mod\xe8le",id:"structure-dun-modele",level:4},{value:"Repository - Op\xe9rations CRUD",id:"repository-operations-crud",level:3},{value:"Interface Repository",id:"interface-repository",level:4},{value:"Patterns d&#39;Utilisation",id:"patterns-utilisation",level:4},{value:"Exemples d&#39;Op\xe9rations CRUD",id:"exemples-operations-crud",level:4},{value:"Recherche par Crit\xe8res",id:"recherche-par-criteres",level:4},{value:"Bonnes Pratiques CRUD",id:"bonnes-pratiques-crud",level:4},{value:"Requ\xeates Avanc\xe9es",id:"requetes-avancees",level:2},{value:"Query Builder",id:"query-builder",level:3},{value:"Construction de Requ\xeates",id:"construction-de-requetes",level:4},{value:"Patterns Avanc\xe9s",id:"patterns-avances",level:4},{value:"Requ\xeates de Base",id:"requetes-de-base",level:4},{value:"Transactions",id:"transactions",level:2},{value:"Gestion des Transactions",id:"gestion-des-transactions",level:3},{value:"Patterns Transactionnels",id:"patterns-transactionnels",level:4},{value:"Exemple Simple",id:"exemple-simple",level:4},{value:"Contexte et Timeout",id:"contexte-et-timeout",level:4},{value:"Points de Sauvegarde",id:"points-de-sauvegarde",level:4},{value:"Dialectes et M\xe9tadonn\xe9es",id:"dialectes-et-metadonnees",level:2},{value:"Support Multi-Base de Donn\xe9es",id:"support-multi-base-de-donnees",level:3},{value:"Impl\xe9mentation d&#39;un Dialecte",id:"implementation-dun-dialecte",level:4},{value:"M\xe9tadonn\xe9es des Mod\xe8les",id:"metadonnees-des-modeles",level:3},{value:"Utilisation des M\xe9tadonn\xe9es",id:"utilisation-des-metadonnees",level:4}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"r\xe9f\xe9rence-api",children:"R\xe9f\xe9rence API"})}),"\n",(0,i.jsx)(n.p,{children:"Cette documentation est con\xe7ue pour les d\xe9veloppeurs utilisant l'ORM. Elle fournit des explications pratiques, des exemples concrets et des bonnes pratiques pour chaque fonctionnalit\xe9."}),"\n",(0,i.jsx)(n.h2,{id:"sommaire",children:"Sommaire"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"#operations-de-base",children:"Op\xe9rations de Base"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#gestion-des-modeles",children:"Gestion des Mod\xe8les"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#repository-operations-crud",children:"Repository - Op\xe9rations CRUD"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"#requetes-avancees",children:"Requ\xeates Avanc\xe9es"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#query-builder",children:"Query Builder"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#construction-de-requetes",children:"Construction de Requ\xeates"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#patterns-avances",children:"Patterns Avanc\xe9s"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"#transactions",children:"Transactions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#gestion-des-transactions",children:"Gestion des Transactions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#patterns-transactionnels",children:"Patterns Transactionnels"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#points-de-sauvegarde",children:"Points de Sauvegarde"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"#dialectes-et-metadonnees",children:"Dialectes et M\xe9tadonn\xe9es"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#support-multi-base-de-donnees",children:"Support Multi-Base de Donn\xe9es"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#metadonnees-des-modeles",children:"M\xe9tadonn\xe9es des Mod\xe8les"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"operations-de-base",children:"Op\xe9rations de Base"}),"\n",(0,i.jsx)(n.h3,{id:"gestion-des-modeles",children:"Gestion des Mod\xe8les"}),"\n",(0,i.jsx)(n.p,{children:"Les mod\xe8les sont la repr\xe9sentation Go de vos tables. Leur conception impacte directement les performances et la maintenabilit\xe9."}),"\n",(0,i.jsx)(n.h4,{id:"structure-dun-modele",children:"Structure d'un Mod\xe8le"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID        uint      `orm:"primary_key;auto_increment"`\n    Name      string    `orm:"size:255;not_null;index"`\n    Email     string    `orm:"unique;size:255"`\n    Age       int       `orm:"default:18"`\n    Active    bool      `orm:"default:true"`\n    CreatedAt time.Time `orm:"not_null;auto_create"`\n    UpdatedAt time.Time `orm:"not_null;auto_update"`\n    DeletedAt *time.Time `orm:"soft_delete"`\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,i.jsx)(n.strong,{children:"Bonnes Pratiques des Mod\xe8les"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Utilisez des types appropri\xe9s (uint pour les ID)"}),"\n",(0,i.jsx)(n.li,{children:"Ajoutez des contraintes pertinentes"}),"\n",(0,i.jsx)(n.li,{children:"Pensez aux index pour les champs souvent recherch\xe9s"}),"\n",(0,i.jsx)(n.li,{children:"Impl\xe9mentez soft delete pour les donn\xe9es sensibles"}),"\n",(0,i.jsx)(n.li,{children:"Ajoutez des timestamps de cr\xe9ation/modification"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"repository-operations-crud",children:"Repository - Op\xe9rations CRUD"}),"\n",(0,i.jsx)(n.p,{children:"Le Repository encapsule la logique d'acc\xe8s aux donn\xe9es. Il fournit une interface claire pour les op\xe9rations CRUD."}),"\n",(0,i.jsx)(n.h4,{id:"interface-repository",children:"Interface Repository"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type Repository interface {\n    // Lecture\n    Find(id interface{}) (interface{}, error)\n    FindAll() ([]interface{}, error)\n    FindBy(criteria map[string]interface{}) ([]interface{}, error)\n    FindOneBy(criteria map[string]interface{}) (interface{}, error)\n    \n    // \xc9criture\n    Save(entity interface{}) error\n    Update(entity interface{}) error\n    Delete(entity interface{}) error\n    \n    // Utilitaires\n    Count() (int64, error)\n    Exists(id interface{}) (bool, error)\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"patterns-utilisation",children:"Patterns d'Utilisation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Cr\xe9ation/Mise \xe0 jour intelligente"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'user := &User{ID: 1, Name: "Alice"}\nrepo.Save(user) // Cr\xe9e si n\'existe pas, met \xe0 jour sinon\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Recherche avec crit\xe8res multiples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'users, err := repo.FindBy(map[string]interface{}{\n    "age": 25,\n    "active": true,\n    "city": "Paris",\n})\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"V\xe9rification avant op\xe9ration"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"if exists, _ := repo.Exists(id); exists {\n    user, err := repo.Find(id)\n    // ...\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"exemples-operations-crud",children:"Exemples d'Op\xe9rations CRUD"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Cr\xe9ation/Mise \xe0 jour intelligente"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'user := &User{ID: 1, Name: "Alice"}\nrepo.Save(user) // Cr\xe9e si n\'existe pas, met \xe0 jour sinon\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Recherche avec crit\xe8res multiples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'users, err := repo.FindBy(map[string]interface{}{\n    "age": 25,\n    "active": true,\n    "city": "Paris",\n})\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"V\xe9rification avant op\xe9ration"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"if exists, _ := repo.Exists(id); exists {\n    user, err := repo.Find(id)\n    // ...\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"recherche-par-criteres",children:"Recherche par Crit\xe8res"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Cr\xe9ation/Mise \xe0 jour intelligente"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'user := &User{ID: 1, Name: "Alice"}\nrepo.Save(user) // Cr\xe9e si n\'existe pas, met \xe0 jour sinon\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Recherche avec crit\xe8res multiples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'users, err := repo.FindBy(map[string]interface{}{\n    "age": 25,\n    "active": true,\n    "city": "Paris",\n})\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"V\xe9rification avant op\xe9ration"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"if exists, _ := repo.Exists(id); exists {\n    user, err := repo.Find(id)\n    // ...\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"bonnes-pratiques-crud",children:"Bonnes Pratiques CRUD"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Gestion des Erreurs"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"user, err := repo.Find(id)\nif err != nil {\n    if errors.Is(err, ErrNotFound) {\n        // G\xe9rer l'absence\n    } else {\n        // G\xe9rer l'erreur\n    }\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Transactions pour les Op\xe9rations Multiples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"err := orm.Transaction(func(tx ORM) error {\n    userRepo := tx.Repository(&User{})\n    orderRepo := tx.Repository(&Order{})\n    \n    // Les op\xe9rations sont atomiques\n    if err := userRepo.Save(user); err != nil {\n        return err // Rollback automatique\n    }\n    return orderRepo.Save(order)\n})\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Validation Avant Sauvegarde"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'func (u *User) BeforeSave() error {\n    if u.Age < 18 {\n        return errors.New("l\'utilisateur doit \xeatre majeur")\n    }\n    return nil\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"requetes-avancees",children:"Requ\xeates Avanc\xe9es"}),"\n",(0,i.jsx)(n.h3,{id:"query-builder",children:"Query Builder"}),"\n",(0,i.jsx)(n.p,{children:"Le Query Builder permet de construire des requ\xeates SQL complexes de mani\xe8re type-safe et maintenable."}),"\n",(0,i.jsx)(n.h4,{id:"construction-de-requetes",children:"Construction de Requ\xeates"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// Requ\xeate avec sous-requ\xeate et jointures\nusers, err := orm.Query(&User{}).\n    Select("users.*, COUNT(orders.id) as order_count").\n    LeftJoin("orders", "orders.user_id = users.id").\n    Where("users.active", "=", true).\n    WhereIn("users.role", []interface{}{"admin", "manager"}).\n    GroupBy("users.id").\n    Having("order_count > ?", 5).\n    OrderBy("order_count", "DESC").\n    Limit(10).\n    Find()\n'})}),"\n",(0,i.jsx)(n.h4,{id:"patterns-avances",children:"Patterns Avanc\xe9s"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Requ\xeates R\xe9utilisables"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'func ActiveUsersQuery(qb QueryBuilder) QueryBuilder {\n    return qb.Where("active", "=", true).\n        WhereNotNull("email_verified_at")\n}\n\n// Utilisation\nusers := orm.Query(&User{}).\n    Pipe(ActiveUsersQuery).\n    OrderBy("created_at", "DESC").\n    Find()\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Agr\xe9gations Complexes"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'stats, err := orm.Query(&Order{}).\n    Select(\n        "DATE(created_at) as date",\n        "COUNT(*) as total_orders",\n        "SUM(amount) as total_amount",\n    ).\n    GroupBy("date").\n    Having("total_amount > ?", 1000).\n    OrderBy("date", "DESC").\n    Find()\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Jointures Multiples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'results, err := orm.Query(&Order{}).\n    Select(\n        "orders.*",\n        "users.name as user_name",\n        "products.title as product_title",\n        "categories.name as category_name",\n    ).\n    Join("users", "users.id = orders.user_id").\n    Join("order_items", "order_items.order_id = orders.id").\n    Join("products", "products.id = order_items.product_id").\n    LeftJoin("categories", "categories.id = products.category_id").\n    Where("orders.status", "=", "completed").\n    Find()\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"requetes-de-base",children:"Requ\xeates de Base"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// Requ\xeate avec sous-requ\xeate et jointures\nusers, err := orm.Query(&User{}).\n    Select("users.*, COUNT(orders.id) as order_count").\n    LeftJoin("orders", "orders.user_id = users.id").\n    Where("users.active", "=", true).\n    WhereIn("users.role", []interface{}{"admin", "manager"}).\n    GroupBy("users.id").\n    Having("order_count > ?", 5).\n    OrderBy("order_count", "DESC").\n    Limit(10).\n    Find()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"transactions",children:"Transactions"}),"\n",(0,i.jsx)(n.h3,{id:"gestion-des-transactions",children:"Gestion des Transactions"}),"\n",(0,i.jsx)(n.p,{children:"Les transactions garantissent l'int\xe9grit\xe9 des donn\xe9es lors d'op\xe9rations multiples."}),"\n",(0,i.jsx)(n.h4,{id:"patterns-transactionnels",children:"Patterns Transactionnels"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Transaction Simple"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"err := orm.Transaction(func(tx ORM) error {\n    // Op\xe9rations dans la transaction\n    return nil // Commit si pas d'erreur\n})\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Transaction avec Timeout"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer cancel()\n\nerr := orm.TransactionWithContext(ctx, func(tx ORM) error {\n    // La transaction est annul\xe9e si elle d\xe9passe 5 secondes\n    return nil\n})\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Transaction avec Points de Sauvegarde"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'err := orm.Transaction(func(tx ORM) error {\n    // Premi\xe8re op\xe9ration\n    if err := tx.SavePoint("step1"); err != nil {\n        return err\n    }\n    \n    // Si erreur ici, retour au point de sauvegarde\n    if err := someRiskyOperation(); err != nil {\n        tx.RollbackTo("step1")\n        return alternativeOperation()\n    }\n    \n    return nil\n})\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,i.jsx)(n.strong,{children:"Bonnes Pratiques Transactionnelles"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Gardez les transactions courtes"}),"\n",(0,i.jsx)(n.li,{children:"\xc9vitez les op\xe9rations externes (API, fichiers)"}),"\n",(0,i.jsx)(n.li,{children:"G\xe9rez correctement les timeouts"}),"\n",(0,i.jsx)(n.li,{children:"Utilisez des points de sauvegarde pour les op\xe9rations complexes"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"exemple-simple",children:"Exemple Simple"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"err := orm.Transaction(func(tx ORM) error {\n    // Op\xe9rations dans la transaction\n    return nil // Commit si pas d'erreur\n})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"contexte-et-timeout",children:"Contexte et Timeout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\ndefer cancel()\n\nerr := orm.TransactionWithContext(ctx, func(tx ORM) error {\n    // La transaction est annul\xe9e si elle d\xe9passe 5 secondes\n    return nil\n})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"points-de-sauvegarde",children:"Points de Sauvegarde"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'err := orm.Transaction(func(tx ORM) error {\n    // Premi\xe8re op\xe9ration\n    if err := tx.SavePoint("step1"); err != nil {\n        return err\n    }\n    \n    // Si erreur ici, retour au point de sauvegarde\n    if err := someRiskyOperation(); err != nil {\n        tx.RollbackTo("step1")\n        return alternativeOperation()\n    }\n    \n    return nil\n})\n'})}),"\n",(0,i.jsx)(n.h2,{id:"dialectes-et-metadonnees",children:"Dialectes et M\xe9tadonn\xe9es"}),"\n",(0,i.jsx)(n.h3,{id:"support-multi-base-de-donnees",children:"Support Multi-Base de Donn\xe9es"}),"\n",(0,i.jsx)(n.p,{children:"L'ORM supporte diff\xe9rentes bases de donn\xe9es via son syst\xe8me de dialectes."}),"\n",(0,i.jsx)(n.h4,{id:"implementation-dun-dialecte",children:"Impl\xe9mentation d'un Dialecte"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type CustomDialect struct {\n    *BaseDialect\n}\n\nfunc (d *CustomDialect) GetSQLType(goType reflect.Type) string {\n    switch goType.Kind() {\n    case reflect.Int64:\n        return "BIGINT"\n    case reflect.String:\n        return "VARCHAR(255)"\n    // ...\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,i.jsx)(n.strong,{children:"Cas d'Utilisation des Dialectes"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Migration entre diff\xe9rentes bases"}),"\n",(0,i.jsx)(n.li,{children:"Support de fonctionnalit\xe9s sp\xe9cifiques"}),"\n",(0,i.jsx)(n.li,{children:"Tests avec base en m\xe9moire"}),"\n",(0,i.jsx)(n.li,{children:"Optimisations sp\xe9cifiques"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"metadonnees-des-modeles",children:"M\xe9tadonn\xe9es des Mod\xe8les"}),"\n",(0,i.jsx)(n.p,{children:"Les m\xe9tadonn\xe9es permettent d'inspecter et de manipuler la structure des mod\xe8les."}),"\n",(0,i.jsx)(n.h4,{id:"utilisation-des-metadonnees",children:"Utilisation des M\xe9tadonn\xe9es"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// Inspection d\'un mod\xe8le\nmetadata, err := orm.GetMetadata(&User{})\nfor _, column := range metadata.Columns {\n    fmt.Printf("Colonne %s: %s\\n", column.Name, column.Type)\n    if column.ForeignKey != nil {\n        fmt.Printf("  -> R\xe9f\xe9rence %s.%s\\n",\n            column.ForeignKey.ReferencedTable,\n            column.ForeignKey.ReferencedColumn)\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,i.jsx)(n.strong,{children:"Applications des M\xe9tadonn\xe9es"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"G\xe9n\xe9ration de sch\xe9mas"}),"\n",(0,i.jsx)(n.li,{children:"Validation de mod\xe8les"}),"\n",(0,i.jsx)(n.li,{children:"Migration de donn\xe9es"}),"\n",(0,i.jsx)(n.li,{children:"G\xe9n\xe9ration de documentation"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);