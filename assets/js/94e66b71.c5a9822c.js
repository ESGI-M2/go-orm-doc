"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2465],{4428:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>u,contentTitle:()=>d,default:()=>c,frontMatter:()=>t,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"library/query-builder","title":"Query Builder","description":"Interface fluide pour construire des requ\xeates SQL complexes.","source":"@site/docs/library/query-builder.md","sourceDirName":"library","slug":"/library/query-builder","permalink":"/go-orm-doc/docs/library/query-builder","draft":false,"unlisted":false,"editUrl":"https://github.com/ESGI-M2/GO/tree/main/docs/docs/library/query-builder.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docs","previous":{"title":"Repository","permalink":"/go-orm-doc/docs/library/repository"},"next":{"title":"Transactions","permalink":"/go-orm-doc/docs/library/transactions"}}');var s=i(4848),l=i(8453);const t={sidebar_position:7},d="Query Builder",u={},a=[{value:"Concepts Fondamentaux",id:"concepts-fondamentaux",level:2},{value:"Query Builder",id:"query-builder-1",level:3},{value:"Architecture",id:"architecture",level:3},{value:"M\xe9thodes de Base",id:"m\xe9thodes-de-base",level:2},{value:"Cr\xe9ation d&#39;une Requ\xeate",id:"cr\xe9ation-dune-requ\xeate",level:3},{value:"S\xe9lection des Champs",id:"s\xe9lection-des-champs",level:3},{value:"<code>Select(fields ...string) QueryBuilder</code>",id:"selectfields-string-querybuilder",level:4},{value:"Conditions WHERE",id:"conditions-where",level:3},{value:"<code>Where(field string, operator string, value interface{}) QueryBuilder</code>",id:"wherefield-string-operator-string-value-interface-querybuilder",level:4},{value:"<code>WhereIn(field string, values []interface{}) QueryBuilder</code>",id:"whereinfield-string-values-interface-querybuilder",level:4},{value:"<code>WhereNotIn(field string, values []interface{}) QueryBuilder</code>",id:"wherenotinfield-string-values-interface-querybuilder",level:4},{value:"<code>WhereNull(field string) QueryBuilder</code>",id:"wherenullfield-string-querybuilder",level:4},{value:"<code>WhereNotNull(field string) QueryBuilder</code>",id:"wherenotnullfield-string-querybuilder",level:4},{value:"Jointures",id:"jointures",level:2},{value:"<code>Join(table string, leftField string, operator string, rightField string) QueryBuilder</code>",id:"jointable-string-leftfield-string-operator-string-rightfield-string-querybuilder",level:3},{value:"<code>LeftJoin(table string, leftField string, operator string, rightField string) QueryBuilder</code>",id:"leftjointable-string-leftfield-string-operator-string-rightfield-string-querybuilder",level:3},{value:"<code>RightJoin(table string, leftField string, operator string, rightField string) QueryBuilder</code>",id:"rightjointable-string-leftfield-string-operator-string-rightfield-string-querybuilder",level:3},{value:"Jointures Multiples",id:"jointures-multiples",level:3},{value:"Tri et Limitation",id:"tri-et-limitation",level:2},{value:"<code>OrderBy(field string, direction string) QueryBuilder</code>",id:"orderbyfield-string-direction-string-querybuilder",level:3},{value:"<code>Limit(count int) QueryBuilder</code>",id:"limitcount-int-querybuilder",level:3},{value:"<code>Offset(count int) QueryBuilder</code>",id:"offsetcount-int-querybuilder",level:3},{value:"Groupement et Agr\xe9gation",id:"groupement-et-agr\xe9gation",level:2},{value:"<code>GroupBy(fields ...string) QueryBuilder</code>",id:"groupbyfields-string-querybuilder",level:3},{value:"<code>Having(field string, operator string, value interface{}) QueryBuilder</code>",id:"havingfield-string-operator-string-value-interface-querybuilder",level:3},{value:"Conditions Avanc\xe9es",id:"conditions-avanc\xe9es",level:2},{value:"<code>WhereOr(conditions [][]interface{}) QueryBuilder</code>",id:"whereorconditions-interface-querybuilder",level:3},{value:"<code>WhereBetween(field string, min, max interface{}) QueryBuilder</code>",id:"wherebetweenfield-string-min-max-interface-querybuilder",level:3},{value:"<code>WhereNotBetween(field string, min, max interface{}) QueryBuilder</code>",id:"wherenotbetweenfield-string-min-max-interface-querybuilder",level:3},{value:"Requ\xeates Sp\xe9cialis\xe9es",id:"requ\xeates-sp\xe9cialis\xe9es",level:2},{value:"<code>Distinct() QueryBuilder</code>",id:"distinct-querybuilder",level:3},{value:"<code>FullTextSearch(field string, query string) QueryBuilder</code>",id:"fulltextsearchfield-string-query-string-querybuilder",level:3},{value:"<code>SubQuery(subquery interfaces.QueryBuilder) QueryBuilder</code>",id:"subquerysubquery-interfacesquerybuilder-querybuilder",level:3},{value:"<code>Union(query interfaces.QueryBuilder) QueryBuilder</code>",id:"unionquery-interfacesquerybuilder-querybuilder",level:3},{value:"Relations",id:"relations",level:2},{value:"<code>With(relation string) QueryBuilder</code>",id:"withrelation-string-querybuilder",level:3},{value:"<code>WithCount(relation string) QueryBuilder</code>",id:"withcountrelation-string-querybuilder",level:3},{value:"<code>WithExists(relation string) QueryBuilder</code>",id:"withexistsrelation-string-querybuilder",level:3},{value:"Pagination",id:"pagination",level:2},{value:"<code>CursorPaginate(limit int, cursor string) QueryBuilder</code>",id:"cursorpaginatelimit-int-cursor-string-querybuilder",level:3},{value:"<code>OffsetPaginate(limit, offset int) QueryBuilder</code>",id:"offsetpaginatelimit-offset-int-querybuilder",level:3},{value:"Verrouillage",id:"verrouillage",level:2},{value:"<code>ForUpdate() QueryBuilder</code>",id:"forupdate-querybuilder",level:3},{value:"<code>ForShare() QueryBuilder</code>",id:"forshare-querybuilder",level:3},{value:"Cache",id:"cache",level:2},{value:"<code>Cache(ttl int) QueryBuilder</code>",id:"cachettl-int-querybuilder",level:3},{value:"Ex\xe9cution des Requ\xeates",id:"ex\xe9cution-des-requ\xeates",level:2},{value:"<code>Find() ([]interface{}, error)</code>",id:"find-interface-error",level:3},{value:"<code>First() (interface{}, error)</code>",id:"first-interface-error",level:3},{value:"<code>Get() ([]interface{}, error)</code>",id:"get-interface-error",level:3},{value:"<code>Count() (int, error)</code>",id:"count-int-error",level:3},{value:"<code>Exists() (bool, error)</code>",id:"exists-bool-error",level:3},{value:"Exemples Pratiques",id:"exemples-pratiques",level:2},{value:"Requ\xeate Simple",id:"requ\xeate-simple",level:3},{value:"Requ\xeate avec Jointure",id:"requ\xeate-avec-jointure",level:3},{value:"Requ\xeate avec Pagination",id:"requ\xeate-avec-pagination",level:3},{value:"Requ\xeate d&#39;Agr\xe9gation",id:"requ\xeate-dagr\xe9gation",level:3},{value:"Requ\xeate Complexe",id:"requ\xeate-complexe",level:3},{value:"Gestion des Erreurs",id:"gestion-des-erreurs",level:2},{value:"Validation des Param\xe8tres",id:"validation-des-param\xe8tres",level:3},{value:"V\xe9rification des R\xe9sultats",id:"v\xe9rification-des-r\xe9sultats",level:3},{value:"Performance et Optimisation",id:"performance-et-optimisation",level:2},{value:"Utilisation des Index",id:"utilisation-des-index",level:3},{value:"Limitation des R\xe9sultats",id:"limitation-des-r\xe9sultats",level:3},{value:"S\xe9lection de Champs",id:"s\xe9lection-de-champs",level:3},{value:"Utilisation du Cache",id:"utilisation-du-cache",level:3}];function o(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"query-builder",children:"Query Builder"})}),"\n",(0,s.jsx)(r.p,{children:"Interface fluide pour construire des requ\xeates SQL complexes."}),"\n",(0,s.jsx)(r.h2,{id:"concepts-fondamentaux",children:"Concepts Fondamentaux"}),"\n",(0,s.jsx)(r.h3,{id:"query-builder-1",children:"Query Builder"}),"\n",(0,s.jsx)(r.p,{children:"Constructeur de requ\xeates qui permet de :"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Construire des requ\xeates fluides"})," avec m\xe9thodes chainables"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"\xc9viter les erreurs SQL"})," avec validation des param\xe8tres"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"S\xe9curiser les requ\xeates"})," avec requ\xeates pr\xe9par\xe9es automatiques"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Maintenir la lisibilit\xe9"})," avec syntaxe proche du SQL naturel"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Supporter plusieurs dialectes"})," sans changer le code applicatif"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(r.p,{children:"Pattern Builder pour cr\xe9er des requ\xeates \xe9tape par \xe9tape :"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'query := orm.Query(&User{}).\n    Select("name", "email").\n    Where("age", ">", 18).\n    Where("is_active", "=", true).\n    OrderBy("name", "ASC").\n    Limit(10)\n\nresults, err := query.Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"m\xe9thodes-de-base",children:"M\xe9thodes de Base"}),"\n",(0,s.jsx)(r.h3,{id:"cr\xe9ation-dune-requ\xeate",children:"Cr\xe9ation d'une Requ\xeate"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"// Cr\xe9er un Query Builder pour un mod\xe8le\nquery := orm.Query(&User{})\n\n// Ou via le SimpleORM\nquery := simpleORM.Query(&User{})\n"})}),"\n",(0,s.jsx)(r.h3,{id:"s\xe9lection-des-champs",children:"S\xe9lection des Champs"}),"\n",(0,s.jsx)(r.h4,{id:"selectfields-string-querybuilder",children:(0,s.jsx)(r.code,{children:"Select(fields ...string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Sp\xe9cifie les champs \xe0 s\xe9lectionner."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// S\xe9lectionner des champs sp\xe9cifiques\nusers, err := orm.Query(&User{}).\n    Select("id", "name", "email").\n    Find()\n\n// S\xe9lectionner tous les champs (par d\xe9faut)\nusers, err := orm.Query(&User{}).\n    Find()\n\n// S\xe9lectionner avec alias\nusers, err := orm.Query(&User{}).\n    Select("name as user_name", "email as user_email").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"conditions-where",children:"Conditions WHERE"}),"\n",(0,s.jsx)(r.h4,{id:"wherefield-string-operator-string-value-interface-querybuilder",children:(0,s.jsx)(r.code,{children:"Where(field string, operator string, value interface{}) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Ajoute une condition WHERE \xe0 la requ\xeate."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Condition simple\nusers, err := orm.Query(&User{}).\n    Where("age", ">", 18).\n    Find()\n\n// Conditions multiples (AND)\nusers, err := orm.Query(&User{}).\n    Where("age", ">", 18).\n    Where("is_active", "=", true).\n    Where("name", "LIKE", "%John%").\n    Find()\n\n// Diff\xe9rents op\xe9rateurs\nusers, err := orm.Query(&User{}).\n    Where("age", ">=", 18).\n    Where("age", "<=", 65).\n    Where("status", "!=", "banned").\n    Find()\n'})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Op\xe9rateurs support\xe9s :"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"="})," : \xc9gal"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"!="})," : Diff\xe9rent"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:">"})," : Sup\xe9rieur"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:">="})," : Sup\xe9rieur ou \xe9gal"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"<"})," : Inf\xe9rieur"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"<="})," : Inf\xe9rieur ou \xe9gal"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"LIKE"})," : Correspondance de motif"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"NOT LIKE"})," : Pas de correspondance de motif"]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"whereinfield-string-values-interface-querybuilder",children:(0,s.jsx)(r.code,{children:"WhereIn(field string, values []interface{}) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Condition WHERE IN pour plusieurs valeurs."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// WHERE IN avec entiers\nusers, err := orm.Query(&User{}).\n    WhereIn("id", []interface{}{1, 2, 3, 4, 5}).\n    Find()\n\n// WHERE IN avec cha\xeenes\nusers, err := orm.Query(&User{}).\n    WhereIn("status", []interface{}{"active", "premium", "verified"}).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h4,{id:"wherenotinfield-string-values-interface-querybuilder",children:(0,s.jsx)(r.code,{children:"WhereNotIn(field string, values []interface{}) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Condition WHERE NOT IN pour exclure des valeurs."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'users, err := orm.Query(&User{}).\n    WhereNotIn("status", []interface{}{"banned", "suspended"}).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h4,{id:"wherenullfield-string-querybuilder",children:(0,s.jsx)(r.code,{children:"WhereNull(field string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Condition WHERE IS NULL."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'users, err := orm.Query(&User{}).\n    WhereNull("deleted_at").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h4,{id:"wherenotnullfield-string-querybuilder",children:(0,s.jsx)(r.code,{children:"WhereNotNull(field string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Condition WHERE IS NOT NULL."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'users, err := orm.Query(&User{}).\n    WhereNotNull("email_verified_at").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"jointures",children:"Jointures"}),"\n",(0,s.jsx)(r.h3,{id:"jointable-string-leftfield-string-operator-string-rightfield-string-querybuilder",children:(0,s.jsx)(r.code,{children:"Join(table string, leftField string, operator string, rightField string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Ajoute une jointure INNER JOIN."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Jointure simple\nposts, err := orm.Query(&Post{}).\n    Join("users", "posts.user_id", "=", "users.id").\n    Where("users.is_active", "=", true).\n    Find()\n\n// Jointure avec s\xe9lection de champs\nposts, err := orm.Query(&Post{}).\n    Select("posts.title", "posts.content", "users.name as author_name").\n    Join("users", "posts.user_id", "=", "users.id").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"leftjointable-string-leftfield-string-operator-string-rightfield-string-querybuilder",children:(0,s.jsx)(r.code,{children:"LeftJoin(table string, leftField string, operator string, rightField string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Ajoute une jointure LEFT JOIN."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// R\xe9cup\xe9rer tous les utilisateurs avec leurs posts (m\xeame sans posts)\nusers, err := orm.Query(&User{}).\n    Select("users.name", "posts.title").\n    LeftJoin("posts", "users.id", "=", "posts.user_id").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"rightjointable-string-leftfield-string-operator-string-rightfield-string-querybuilder",children:(0,s.jsx)(r.code,{children:"RightJoin(table string, leftField string, operator string, rightField string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Ajoute une jointure RIGHT JOIN."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// R\xe9cup\xe9rer tous les posts avec leurs auteurs\nposts, err := orm.Query(&Post{}).\n    Select("posts.title", "users.name").\n    RightJoin("users", "posts.user_id", "=", "users.id").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"jointures-multiples",children:"Jointures Multiples"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Jointures multiples\ncomments, err := orm.Query(&Comment{}).\n    Select("comments.content", "users.name", "posts.title").\n    Join("users", "comments.user_id", "=", "users.id").\n    Join("posts", "comments.post_id", "=", "posts.id").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"tri-et-limitation",children:"Tri et Limitation"}),"\n",(0,s.jsx)(r.h3,{id:"orderbyfield-string-direction-string-querybuilder",children:(0,s.jsx)(r.code,{children:"OrderBy(field string, direction string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Trie les r\xe9sultats par un champ."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Tri croissant\nusers, err := orm.Query(&User{}).\n    OrderBy("name", "ASC").\n    Find()\n\n// Tri d\xe9croissant\nusers, err := orm.Query(&User{}).\n    OrderBy("created_at", "DESC").\n    Find()\n\n// Tri multiple\nusers, err := orm.Query(&User{}).\n    OrderBy("age", "DESC").\n    OrderBy("name", "ASC").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"limitcount-int-querybuilder",children:(0,s.jsx)(r.code,{children:"Limit(count int) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Limite le nombre de r\xe9sultats."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"// Limiter \xe0 10 r\xe9sultats\nusers, err := orm.Query(&User{}).\n    Limit(10).\n    Find()\n"})}),"\n",(0,s.jsx)(r.h3,{id:"offsetcount-int-querybuilder",children:(0,s.jsx)(r.code,{children:"Offset(count int) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"D\xe9finit le d\xe9calage pour la pagination."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"// Pagination : page 2, 10 \xe9l\xe9ments par page\nusers, err := orm.Query(&User{}).\n    Limit(10).\n    Offset(10).\n    Find()\n"})}),"\n",(0,s.jsx)(r.h2,{id:"groupement-et-agr\xe9gation",children:"Groupement et Agr\xe9gation"}),"\n",(0,s.jsx)(r.h3,{id:"groupbyfields-string-querybuilder",children:(0,s.jsx)(r.code,{children:"GroupBy(fields ...string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Groupe les r\xe9sultats par un ou plusieurs champs."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Grouper par champ\nresult, err := orm.Query(&Order{}).\n    Select("status", "COUNT(*) as count").\n    GroupBy("status").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"havingfield-string-operator-string-value-interface-querybuilder",children:(0,s.jsx)(r.code,{children:"Having(field string, operator string, value interface{}) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Ajoute une condition HAVING."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Grouper avec condition\nresult, err := orm.Query(&Order{}).\n    Select("user_id", "COUNT(*) as order_count").\n    GroupBy("user_id").\n    Having("order_count", ">", 5).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"conditions-avanc\xe9es",children:"Conditions Avanc\xe9es"}),"\n",(0,s.jsx)(r.h3,{id:"whereorconditions-interface-querybuilder",children:(0,s.jsx)(r.code,{children:"WhereOr(conditions [][]interface{}) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Ajoute des conditions OR."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Conditions OR\nusers, err := orm.Query(&User{}).\n    WhereOr([][]interface{}{\n        {"age", ">", 65},\n        {"is_vip", "=", true},\n    }).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"wherebetweenfield-string-min-max-interface-querybuilder",children:(0,s.jsx)(r.code,{children:"WhereBetween(field string, min, max interface{}) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Condition BETWEEN."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Entre deux valeurs\nusers, err := orm.Query(&User{}).\n    WhereBetween("age", 18, 65).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"wherenotbetweenfield-string-min-max-interface-querybuilder",children:(0,s.jsx)(r.code,{children:"WhereNotBetween(field string, min, max interface{}) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Condition NOT BETWEEN."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Pas entre deux valeurs\nusers, err := orm.Query(&User{}).\n    WhereNotBetween("age", 13, 17).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"requ\xeates-sp\xe9cialis\xe9es",children:"Requ\xeates Sp\xe9cialis\xe9es"}),"\n",(0,s.jsx)(r.h3,{id:"distinct-querybuilder",children:(0,s.jsx)(r.code,{children:"Distinct() QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Supprime les doublons."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// R\xe9sultats uniques\ncities, err := orm.Query(&User{}).\n    Select("city").\n    Distinct().\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"fulltextsearchfield-string-query-string-querybuilder",children:(0,s.jsx)(r.code,{children:"FullTextSearch(field string, query string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Recherche textuelle compl\xe8te."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Recherche full-text\nposts, err := orm.Query(&Post{}).\n    FullTextSearch("content", "golang programming").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"subquerysubquery-interfacesquerybuilder-querybuilder",children:(0,s.jsx)(r.code,{children:"SubQuery(subquery interfaces.QueryBuilder) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Utilise une sous-requ\xeate."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Sous-requ\xeate\nactiveUsers := orm.Query(&User{}).\n    Select("id").\n    Where("is_active", "=", true)\n\nposts, err := orm.Query(&Post{}).\n    Where("user_id", "IN", activeUsers).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"unionquery-interfacesquerybuilder-querybuilder",children:(0,s.jsx)(r.code,{children:"Union(query interfaces.QueryBuilder) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Union de requ\xeates."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Union\npremiumUsers := orm.Query(&User{}).\n    Where("is_premium", "=", true)\n\nvipUsers := orm.Query(&User{}).\n    Where("is_vip", "=", true)\n\nallSpecialUsers, err := premiumUsers.Union(vipUsers).Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"relations",children:"Relations"}),"\n",(0,s.jsx)(r.h3,{id:"withrelation-string-querybuilder",children:(0,s.jsx)(r.code,{children:"With(relation string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Charge une relation."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Charger la relation\nusers, err := orm.Query(&User{}).\n    With("Posts").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"withcountrelation-string-querybuilder",children:(0,s.jsx)(r.code,{children:"WithCount(relation string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Compte les \xe9l\xe9ments d'une relation."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Compter les relations\nusers, err := orm.Query(&User{}).\n    WithCount("Posts").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"withexistsrelation-string-querybuilder",children:(0,s.jsx)(r.code,{children:"WithExists(relation string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"V\xe9rifie l'existence d'une relation."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// V\xe9rifier l\'existence\nusers, err := orm.Query(&User{}).\n    WithExists("Posts").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"pagination",children:"Pagination"}),"\n",(0,s.jsx)(r.h3,{id:"cursorpaginatelimit-int-cursor-string-querybuilder",children:(0,s.jsx)(r.code,{children:"CursorPaginate(limit int, cursor string) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Pagination par curseur."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Pagination par curseur\nusers, err := orm.Query(&User{}).\n    CursorPaginate(10, "").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"offsetpaginatelimit-offset-int-querybuilder",children:(0,s.jsx)(r.code,{children:"OffsetPaginate(limit, offset int) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Pagination par offset."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:"// Pagination par offset\nusers, err := orm.Query(&User{}).\n    OffsetPaginate(10, 20).\n    Find()\n"})}),"\n",(0,s.jsx)(r.h2,{id:"verrouillage",children:"Verrouillage"}),"\n",(0,s.jsx)(r.h3,{id:"forupdate-querybuilder",children:(0,s.jsx)(r.code,{children:"ForUpdate() QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Verrouillage pour mise \xe0 jour."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Verrouiller pour mise \xe0 jour\nuser, err := orm.Query(&User{}).\n    Where("id", "=", 1).\n    ForUpdate().\n    First()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"forshare-querybuilder",children:(0,s.jsx)(r.code,{children:"ForShare() QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Verrouillage partag\xe9."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Verrouillage partag\xe9\nuser, err := orm.Query(&User{}).\n    Where("id", "=", 1).\n    ForShare().\n    First()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"cache",children:"Cache"}),"\n",(0,s.jsx)(r.h3,{id:"cachettl-int-querybuilder",children:(0,s.jsx)(r.code,{children:"Cache(ttl int) QueryBuilder"})}),"\n",(0,s.jsx)(r.p,{children:"Met en cache le r\xe9sultat."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Cache pendant 5 minutes\nusers, err := orm.Query(&User{}).\n    Where("is_active", "=", true).\n    Cache(300).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"ex\xe9cution-des-requ\xeates",children:"Ex\xe9cution des Requ\xeates"}),"\n",(0,s.jsx)(r.h3,{id:"find-interface-error",children:(0,s.jsx)(r.code,{children:"Find() ([]interface{}, error)"})}),"\n",(0,s.jsx)(r.p,{children:"Ex\xe9cute la requ\xeate et retourne tous les r\xe9sultats."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'users, err := orm.Query(&User{}).\n    Where("age", ">", 18).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"first-interface-error",children:(0,s.jsx)(r.code,{children:"First() (interface{}, error)"})}),"\n",(0,s.jsx)(r.p,{children:"Retourne le premier r\xe9sultat."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'user, err := orm.Query(&User{}).\n    Where("email", "=", "john@example.com").\n    First()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"get-interface-error",children:(0,s.jsx)(r.code,{children:"Get() ([]interface{}, error)"})}),"\n",(0,s.jsx)(r.p,{children:"Alias pour Find()."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'users, err := orm.Query(&User{}).\n    Where("is_active", "=", true).\n    Get()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"count-int-error",children:(0,s.jsx)(r.code,{children:"Count() (int, error)"})}),"\n",(0,s.jsx)(r.p,{children:"Compte les r\xe9sultats."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'count, err := orm.Query(&User{}).\n    Where("is_active", "=", true).\n    Count()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"exists-bool-error",children:(0,s.jsx)(r.code,{children:"Exists() (bool, error)"})}),"\n",(0,s.jsx)(r.p,{children:"V\xe9rifie l'existence."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'exists, err := orm.Query(&User{}).\n    Where("email", "=", "john@example.com").\n    Exists()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"exemples-pratiques",children:"Exemples Pratiques"}),"\n",(0,s.jsx)(r.h3,{id:"requ\xeate-simple",children:"Requ\xeate Simple"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Utilisateurs actifs\nusers, err := orm.Query(&User{}).\n    Where("is_active", "=", true).\n    OrderBy("name", "ASC").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"requ\xeate-avec-jointure",children:"Requ\xeate avec Jointure"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Posts avec auteurs\nposts, err := orm.Query(&Post{}).\n    Select("posts.title", "posts.content", "users.name as author").\n    Join("users", "posts.user_id", "=", "users.id").\n    Where("posts.published", "=", true).\n    OrderBy("posts.created_at", "DESC").\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"requ\xeate-avec-pagination",children:"Requ\xeate avec Pagination"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Pagination des utilisateurs\nusers, err := orm.Query(&User{}).\n    Where("is_active", "=", true).\n    OrderBy("created_at", "DESC").\n    Limit(20).\n    Offset(page * 20).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"requ\xeate-dagr\xe9gation",children:"Requ\xeate d'Agr\xe9gation"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Statistiques par statut\nstats, err := orm.Query(&Order{}).\n    Select("status", "COUNT(*) as count", "SUM(amount) as total").\n    GroupBy("status").\n    Having("count", ">", 0).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"requ\xeate-complexe",children:"Requ\xeate Complexe"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Utilisateurs avec posts r\xe9cents\nusers, err := orm.Query(&User{}).\n    Select("users.name", "COUNT(posts.id) as post_count").\n    Join("posts", "users.id", "=", "posts.user_id").\n    Where("posts.created_at", ">", time.Now().AddDate(0, -1, 0)).\n    Where("users.is_active", "=", true).\n    GroupBy("users.id", "users.name").\n    Having("post_count", ">", 5).\n    OrderBy("post_count", "DESC").\n    Limit(10).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"gestion-des-erreurs",children:"Gestion des Erreurs"}),"\n",(0,s.jsx)(r.h3,{id:"validation-des-param\xe8tres",children:"Validation des Param\xe8tres"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'users, err := orm.Query(&User{}).\n    Where("age", ">", 18).\n    Find()\n\nif err != nil {\n    switch err {\n    case query.ErrInvalidOperator:\n        log.Fatal("Op\xe9rateur invalide")\n    case query.ErrMissingField:\n        log.Fatal("Champ manquant")\n    default:\n        log.Fatal("Erreur de requ\xeate:", err)\n    }\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"v\xe9rification-des-r\xe9sultats",children:"V\xe9rification des R\xe9sultats"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'user, err := orm.Query(&User{}).\n    Where("id", "=", 1).\n    First()\n\nif err != nil {\n    if err == query.ErrNoRows {\n        log.Println("Aucun utilisateur trouv\xe9")\n    } else {\n        log.Fatal("Erreur:", err)\n    }\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"performance-et-optimisation",children:"Performance et Optimisation"}),"\n",(0,s.jsx)(r.h3,{id:"utilisation-des-index",children:"Utilisation des Index"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Utiliser les champs index\xe9s\nusers, err := orm.Query(&User{}).\n    Where("email", "=", "john@example.com"). // email est index\xe9\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"limitation-des-r\xe9sultats",children:"Limitation des R\xe9sultats"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Limiter les r\xe9sultats\nusers, err := orm.Query(&User{}).\n    Where("is_active", "=", true).\n    Limit(100). // Ne pas charger trop de donn\xe9es\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"s\xe9lection-de-champs",children:"S\xe9lection de Champs"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// S\xe9lectionner seulement les champs n\xe9cessaires\nusers, err := orm.Query(&User{}).\n    Select("id", "name", "email").\n    Where("is_active", "=", true).\n    Find()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"utilisation-du-cache",children:"Utilisation du Cache"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-go",children:'// Mettre en cache les requ\xeates fr\xe9quentes\nusers, err := orm.Query(&User{}).\n    Where("is_active", "=", true).\n    Cache(300). // 5 minutes\n    Find()\n'})})]})}function c(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);