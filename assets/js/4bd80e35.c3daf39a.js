"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5996],{5777:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"library/logging","title":"Journalisation & Monitoring","description":"GO ORM peut enregistrer chaque requ\xeate SQL ex\xe9cut\xe9e, son temps d\'ex\xe9cution ainsi que les arguments utilis\xe9s.","source":"@site/docs/library/logging.md","sourceDirName":"library","slug":"/library/logging","permalink":"/docs/intro/docs/library/logging","draft":false,"unlisted":false,"editUrl":"https://github.com/ESGI-M2/GO/tree/main/docs/docs/library/logging.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"docs","previous":{"title":"Transactions","permalink":"/docs/intro/docs/library/transactions"},"next":{"title":"Pagination & Cache","permalink":"/docs/intro/docs/library/pagination"}}');var i=r(4848),o=r(8453);const t={sidebar_position:10},l="Journalisation & Monitoring",c={},a=[{value:"1. Activer le Query Log",id:"1-activer-le-query-log",level:2},{value:"2. Ex\xe9cuter des requ\xeates",id:"2-ex\xe9cuter-des-requ\xeates",level:2},{value:"3. Lire les logs",id:"3-lire-les-logs",level:2},{value:"4. D\xe9sactiver en production",id:"4-d\xe9sactiver-en-production",level:2}];function u(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"journalisation--monitoring",children:"Journalisation & Monitoring"})}),"\n",(0,i.jsx)(n.p,{children:"GO ORM peut enregistrer chaque requ\xeate SQL ex\xe9cut\xe9e, son temps d'ex\xe9cution ainsi que les arguments utilis\xe9s."}),"\n",(0,i.jsx)(n.h2,{id:"1-activer-le-query-log",children:"1. Activer le Query Log"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"orm.EnableQueryLog()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2-ex\xe9cuter-des-requ\xeates",children:"2. Ex\xe9cuter des requ\xeates"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'_ = orm.Query(&User{}).\n    Where("is_active", "=", true).\n    Find()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"3-lire-les-logs",children:"3. Lire les logs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'logs := orm.GetQueryLogs()\nfor _, l := range logs {\n    fmt.Printf("%s (%.2f ms) Args: %v\\n", l.SQL, l.Duration.Seconds()*1000, l.Args)\n}\n\n// Nettoyer\norm.ClearQueryLogs()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4-d\xe9sactiver-en-production",children:"4. D\xe9sactiver en production"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"orm.DisableQueryLog()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gardez le logging activ\xe9 seulement en d\xe9veloppement ou lorsque vous diagnostiquez des probl\xe8mes de performance."}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var s=r(6540);const i={},o=s.createContext(i);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);